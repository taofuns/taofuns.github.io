<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>taofuns</title><description>Time I waste, and the fun i get</description><link>https://taofuns.github.io</link><language>en</language><lastBuildDate>Mon, 3 Jul 2023 03:37:25 +0800</lastBuildDate><pubDate>Mon, 3 Jul 2023 03:37:25 +0800</pubDate><ttl>250</ttl><atom:link href="https://taofuns.github.io/feed.rss" rel="self" type="application/rss+xml"/><item><guid isPermaLink="true">https://taofuns.github.io/posts/copty</guid><title>copty</title><description></description><link>https://taofuns.github.io/posts/copty</link><pubDate>Mon, 3 Jul 2023 03:24:18 +0800</pubDate><content:encoded><![CDATA[<p>dsfsdf</p><p>dsf</p>]]></content:encoded></item><item><guid isPermaLink="true">https://taofuns.github.io/posts/Result%20Builders%20in%20Swift</guid><title>Result Builders in Swift</title><description>A description of my first post.</description><link>https://taofuns.github.io/posts/Result%20Builders%20in%20Swift</link><pubDate>Sun, 2 Jul 2023 23:56:00 +0800</pubDate><content:encoded><![CDATA[<h1>Result Builders in Swift</h1><p>https://github.com/apple/swift-evolution/blob/main/proposals/0289-result-builders.md</p><p><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/advancedoperators/#Result-Builders">Documentation in advanced operation</a> <a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/attributes/#resultBuilder">Documentation in attributes</a> <a href="https://developer.apple.com/wwdc21/10253">Write a DSL in Swift using result builders - WWDC21 - Videos - Apple Developer</a> #Apple/WWDC/21</p><p>Apply this attribute to a class, structure, enumeration to use that type as a result builder. A <em>result builder</em> is a type that builds a nested data structure step by step.</p><p>You use result builders to implement a domain-specific language (DSL) for creating nested data structures in a natural, declarative way.</p><h2>Translate from compiler</h2><p>https://developer.apple.com/wwdc19/402 <img src="Result%20Builders%20in%20Swift/D53BC15E-D41D-4310-B934-3D316D657A0A.png"/></p><h2>View Builder</h2><p><a href="https://developer.apple.com/documentation/swiftui/viewbuilder/">ViewBuilder | Apple Developer Documentation</a></p><h2>DSL</h2><p>Embedded DLSs, in a declarative way</p><p>With SwiftUI DSL: <img src="Result%20Builders%20in%20Swift/BC8D12E5-26B2-49D9-8381-9730ECB654E1.png"/> Without SwiftUI DSL:</p><pre><code class="language-swift">struct FavoriteSmoothies: View {
    @EnvironmentObject
    private var model: FrutaModel

    var body: some View {
        var list = SmoothieList(smoothies: model.favoriteSmoothies)
        
        let overlay: View
        if model.favoriteSmoothies.isEmpty {
            var text = Text("Add some smoothies!")
            text.foregroundColor = .secondary

            var frame = Frame(subview: text)
            frame.maxWidth = .infinity
            frame.maxHeight = .infinity
            overlay = frame
        } else {
            overlay = EmptyView()
        }
        
        list.addOverlay(overlay)
        list.navigationTitle = "Favorites"
        
        return list
    }
}
</code></pre><img src="Result%20Builders%20in%20Swift/0A307F6D-5868-468A-AE78-F10D86799FD1.png"/>]]></content:encoded></item><item><guid isPermaLink="true">https://taofuns.github.io/posts/Swift%20macros</guid><title>Swift macros</title><description>intro swift macro</description><link>https://taofuns.github.io/posts/Swift%20macros</link><pubDate>Sun, 2 Jul 2023 23:56:00 +0800</pubDate><content:encoded><![CDATA[<h2>What is Macro</h2><blockquote><p><a href="https://en.wikipedia.org/wiki/Macro_(computer_science)?wprov=sfti1">Macro (computer science) - Wikipedia</a></p></blockquote><p>Macro is a function that can map an input to output.</p><p>In the past, I am familiar with the macro that control mouse and keyboard.</p><h2>Expand Swift Macros</h2><p><a href="https://developer.apple.com/wwdc23/10167">Expand on Swift macros - WWDC23 - Videos - Apple Developer</a></p><img src="https://obsidian-1305666858.cos.ap-nanjing.myqcloud.com/202307030334906.jpg"/><p>Macro can solve the missing features that compiler didnâ€™t support.</p><h3>Expand with Xcode</h3><p>The common problem with macro is that it will cause hard to read, and Swift solve this by integrated with Xcode to supply a convenient way to show the original code, even if the macro package is closed source.</p><h3>Macro Role</h3><img src="https://obsidian-1305666858.cos.ap-nanjing.myqcloud.com/202307030335495.png"/><p>Macros behavior like shortcuts, and it can expand code to a re-designed way.</p><h3>How Macro works</h3><img src="https://obsidian-1305666858.cos.ap-nanjing.myqcloud.com/202307030335594.png"/><p>It works as a plugin for Swift complier.</p><h3>How to write macro</h3><img src="https://obsidian-1305666858.cos.ap-nanjing.myqcloud.com/202307030335207.png"/><p>The basic syntax conformance to struct definition, and we use macro to macro definition self.</p><p><a href="https://swiftpackageindex.com/apple/swift-syntax/508.0.1/documentation/swiftsyntax">SwiftSyntax lib Documentation</a></p><p><code>SwiftSyntaxMacros</code> supplies the basic types. <img src="https://obsidian-1305666858.cos.ap-nanjing.myqcloud.com/202307030335696.png"/></p><p><code>SwiftSyntaxBuilder</code> library use string directly to build source code.</p><h2>Write Swift macros</h2><p><a href="https://developer.apple.com/wwdc23/10166">Write Swift macros - WWDC23 - Videos - Apple Developer</a></p><p>Macro is linked to swift package, and a particular type. <img src="https://obsidian-1305666858.cos.ap-nanjing.myqcloud.com/202307030335928.png"/></p>]]></content:encoded></item><item><guid isPermaLink="true">https://taofuns.github.io/posts/first-post</guid><title>My first post</title><description>A description of my first post.</description><link>https://taofuns.github.io/posts/first-post</link><pubDate>Sun, 2 Jul 2023 23:56:00 +0800</pubDate><content:encoded><![CDATA[<h1>My first post</h1><p>My first post's text.</p>]]></content:encoded></item></channel></rss>